########### Order Manager SQL Queries

order.orderlist=SELECT * FROM EM_USER_MASTER
order.portalOrder=select zam.order_id,zam.status_code,zam.retry,zam.sys_creation_date,zam.sys_update_date,zam.originator_id,zeo.order_type,zcb.ban_number,zcb.ctn_number, en.first_name,en.last_name,en.email,en.phone_number,en.address1,en.address2,en.city,en.state,en.zip_code from zig_auto_master zam ,zig_extra_order zeo ,zig_customer_backend_info zcb ,zig_enrollment en where zam.order_id=zeo.order_id AND zeo.order_id=zcb.order_id AND zeo.order_id=en.order_id AND ZAM.ORDER_ID=?
order.shipOrder=select epc_sku_id,product_type,imei,sim,esn_no,shipment_date from zig_order_shipment_info where order_id=?
order.ensembleOrder=SELECT A.EXT_ORDER_OID,A.ENS_ORDER_OID,B.BAN,B.SYS_CREATION_DATE, B.SYS_UPDATE_DATE, B.APPLICATION_ID, B.ORDER_STATUS, C.PTN,C.PTN_STATUS FROM ENS_EXT_ORDER_MAP A,POS_ORDER B, SUBSCRIBER_RSOURCE C WHERE A.ENS_ORDER_OID = B.ORDER_OID AND B.BAN = C.BAN AND A.EXT_ORDER_OID =?
order.apiOrder=SELECT ORDER_ID,ERROR_MESSAGE,SOURCE,API_NAME,to_char(SYS_CREATION_DATE,'DD-MON-YYYY HH:MI:SS AM') as SYS_CREATION_DATE,ORIGINATOR_ID,SEQ_NUM FROM zig_ser_order_error where order_id=? and rownum<=50  order by sys_creation_date desc
order.stuckOrdersCount=select status_code ,count(status_code) as count from zig_auto_master where sys_creation_date>sysdate-50 and status_code in ('OSHF','ORFI','ACTF','ORLF','OURF','PDRF','PTRF') group by status_code
order.stuckOrdersbyStatus=select order_id from zig_auto_master where sys_creation_date>sysdate-50 and status_code=?
order.updateOrderStatusQuerry=update ZIG_AUTO_MASTER set status_code=? where order_id=?
order.updateOrderIMEIQuerry=update ZIG_ORDER_SHIPMENT_INFO set IMEI=? where order_id=?
order.updateOrderSIMQuerry=update ZIG_ORDER_SHIPMENT_INFO set SIM=? where order_id=?
order.updateOrderRetryCountQuerry=update ZIG_AUTO_MASTER set retry=? where order_id=?
order.updateOrderTrackerQuerry=insert into PSO_ORDER_TRACKER values (?,?,?,sysdate,?,?,?)
order.getAPIRequest=SELECT REQUEST FROM ZIG_SER_ORDER_ERROR WHERE SEQ_NUM =?
order.handled=select new_value,count(new_value) as count from PSO_ORDER_TRACKER where sys_update_time > sysdate-10 and new_value in ('OSHF','ORFI','ORLF','ACTF','OURF','PDRF','PRTF') group by new_value
order.stuckOrdersStatusbyCount=select status_code,count(status_code) as count from zig_auto_master where sys_creation_date>sysdate-10 and status_code in ('OSHF','ORFI','ACTF','ORLF','OURF','PDRF','PRTF') group by status_code

